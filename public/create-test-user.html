<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‰µå»ºæ¸¬è©¦ç”¨æˆ¶ - ForoPrayo</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #FFE5D9;
        }
        .section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .success { color: #28a745; }
        .error { color: #dc3545; }
        .warning { color: #ffc107; }
        .info { color: #007bff; }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #0056b3; }
        input {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        pre {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <h1>ğŸ”§ å‰µå»ºæ¸¬è©¦ç”¨æˆ¶</h1>
    
    <div class="section">
        <h2>ğŸ“ å‰µå»ºæ–°æ¸¬è©¦å¸³è™Ÿ</h2>
        <input type="email" id="testEmail" placeholder="æ¸¬è©¦ç”¨é›»å­éƒµä»¶" value="test@foroprayo.com">
        <input type="password" id="testPassword" placeholder="æ¸¬è©¦ç”¨å¯†ç¢¼" value="test123456">
        <br>
        <button onclick="createTestUser()">ğŸš€ å‰µå»ºæ¸¬è©¦ç”¨æˆ¶</button>
        <button onclick="signInTestUser()">ğŸ”“ ä½¿ç”¨æ­¤å¸³è™Ÿç™»å…¥</button>
        <div id="result"></div>
    </div>

    <div class="section">
        <h2>ğŸ” æˆ–è€…ä½¿ç”¨ç¾æœ‰å¸³è™Ÿ</h2>
        <input type="email" id="existingEmail" placeholder="ç¾æœ‰é›»å­éƒµä»¶" value="chenjuwe@gmail.com">
        <input type="password" id="existingPassword" placeholder="ç¾æœ‰å¯†ç¢¼" value="">
        <br>
        <button onclick="signInExistingUser()">ğŸ”“ ç™»å…¥ç¾æœ‰å¸³è™Ÿ</button>
        <button onclick="resetExistingPassword()">ğŸ”„ é‡è¨­å¯†ç¢¼</button>
        <div id="existingResult"></div>
    </div>

    <script type="module">
        const firebaseConfig = {
            apiKey: "AIzaSyBcFamR8al69jVzgia0kxKIcf5inLpxt0I",
            authDomain: "foroprayo.firebaseapp.com",
            projectId: "foroprayo",
            storageBucket: "foroprayo.firebasestorage.app",
            messagingSenderId: "863364228350",
            appId: "1:863364228350:web:9aa4648b3582c8670a71af",
            measurementId: "G-YX85B6N0M8"
        };

        let auth = null;

        // åˆå§‹åŒ– Firebase
        async function initFirebase() {
            if (!auth) {
                try {
                    const { initializeApp } = await import('https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js');
                    const { getAuth } = await import('https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js');
                    
                    const app = initializeApp(firebaseConfig);
                    auth = getAuth(app);
                } catch (error) {
                    console.error('Firebase åˆå§‹åŒ–å¤±æ•—:', error);
                    throw error;
                }
            }
            return auth;
        }

        // å‰µå»ºæ¸¬è©¦ç”¨æˆ¶
        window.createTestUser = async function() {
            const email = document.getElementById('testEmail').value;
            const password = document.getElementById('testPassword').value;
            const result = document.getElementById('result');
            
            if (!email || !password) {
                result.innerHTML = '<p class="error">è«‹è¼¸å…¥é›»å­éƒµä»¶å’Œå¯†ç¢¼</p>';
                return;
            }

            result.innerHTML = '<p class="info">æ­£åœ¨å‰µå»ºæ¸¬è©¦ç”¨æˆ¶...</p>';

            try {
                await initFirebase();
                const { createUserWithEmailAndPassword } = await import('https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js');
                
                const userCredential = await createUserWithEmailAndPassword(auth, email, password);
                
                result.innerHTML = `
                    <p class="success">âœ… æ¸¬è©¦ç”¨æˆ¶å‰µå»ºæˆåŠŸï¼</p>
                    <p><strong>Email:</strong> ${userCredential.user.email}</p>
                    <p><strong>User ID:</strong> ${userCredential.user.uid}</p>
                    <p class="info">ç¾åœ¨å¯ä»¥ä½¿ç”¨æ­¤å¸³è™Ÿç™»å…¥æ‡‰ç”¨ç¨‹å¼äº†ï¼</p>
                `;
            } catch (error) {
                let errorMessage = error.message;
                if (error.code === 'auth/email-already-in-use') {
                    errorMessage = 'æ­¤é›»å­éƒµä»¶å·²è¢«ä½¿ç”¨ï¼Œè«‹å˜—è©¦ç™»å…¥æˆ–ä½¿ç”¨ä¸åŒçš„é›»å­éƒµä»¶';
                } else if (error.code === 'auth/weak-password') {
                    errorMessage = 'å¯†ç¢¼å¤ªå¼±ï¼Œè«‹ä½¿ç”¨è‡³å°‘ 6 å€‹å­—ç¬¦';
                } else if (error.code === 'auth/invalid-email') {
                    errorMessage = 'é›»å­éƒµä»¶æ ¼å¼ç„¡æ•ˆ';
                }
                
                result.innerHTML = `
                    <p class="error">âŒ å‰µå»ºç”¨æˆ¶å¤±æ•—ï¼š${errorMessage}</p>
                    <p><strong>éŒ¯èª¤ä»£ç¢¼:</strong> ${error.code}</p>
                `;
            }
        };

        // ä½¿ç”¨æ¸¬è©¦å¸³è™Ÿç™»å…¥
        window.signInTestUser = async function() {
            const email = document.getElementById('testEmail').value;
            const password = document.getElementById('testPassword').value;
            const result = document.getElementById('result');
            
            if (!email || !password) {
                result.innerHTML = '<p class="error">è«‹è¼¸å…¥é›»å­éƒµä»¶å’Œå¯†ç¢¼</p>';
                return;
            }

            result.innerHTML = '<p class="info">æ­£åœ¨ç™»å…¥...</p>';

            try {
                await initFirebase();
                const { signInWithEmailAndPassword } = await import('https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js');
                
                const userCredential = await signInWithEmailAndPassword(auth, email, password);
                
                result.innerHTML = `
                    <p class="success">âœ… ç™»å…¥æˆåŠŸï¼</p>
                    <p><strong>User ID:</strong> ${userCredential.user.uid}</p>
                    <p><strong>Email:</strong> ${userCredential.user.email}</p>
                    <p class="info">ç¾åœ¨å¯ä»¥å‰å¾€ä¸»æ‡‰ç”¨ç¨‹å¼ä½¿ç”¨ç›¸åŒå¸³è™Ÿç™»å…¥ï¼</p>
                `;
            } catch (error) {
                let errorMessage = error.message;
                if (error.code === 'auth/user-not-found') {
                    errorMessage = 'ç”¨æˆ¶ä¸å­˜åœ¨ï¼Œè«‹å…ˆè¨»å†Š';
                } else if (error.code === 'auth/wrong-password') {
                    errorMessage = 'å¯†ç¢¼éŒ¯èª¤';
                } else if (error.code === 'auth/invalid-credential') {
                    errorMessage = 'æ†‘è­‰ç„¡æ•ˆï¼Œè«‹æª¢æŸ¥é›»å­éƒµä»¶å’Œå¯†ç¢¼';
                }
                
                result.innerHTML = `
                    <p class="error">âŒ ç™»å…¥å¤±æ•—ï¼š${errorMessage}</p>
                    <p><strong>éŒ¯èª¤ä»£ç¢¼:</strong> ${error.code}</p>
                `;
            }
        };

        // ä½¿ç”¨ç¾æœ‰å¸³è™Ÿç™»å…¥
        window.signInExistingUser = async function() {
            const email = document.getElementById('existingEmail').value;
            const password = document.getElementById('existingPassword').value;
            const result = document.getElementById('existingResult');
            
            if (!email || !password) {
                result.innerHTML = '<p class="error">è«‹è¼¸å…¥é›»å­éƒµä»¶å’Œå¯†ç¢¼</p>';
                return;
            }

            result.innerHTML = '<p class="info">æ­£åœ¨ç™»å…¥...</p>';

            try {
                await initFirebase();
                const { signInWithEmailAndPassword } = await import('https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js');
                
                const userCredential = await signInWithEmailAndPassword(auth, email, password);
                
                result.innerHTML = `
                    <p class="success">âœ… ç™»å…¥æˆåŠŸï¼</p>
                    <p><strong>User ID:</strong> ${userCredential.user.uid}</p>
                    <p><strong>Email:</strong> ${userCredential.user.email}</p>
                `;
            } catch (error) {
                let errorMessage = error.message;
                let suggestion = '';
                
                if (error.code === 'auth/user-not-found') {
                    errorMessage = 'ç”¨æˆ¶ä¸å­˜åœ¨';
                    suggestion = 'å»ºè­°ï¼šé»æ“Šä¸‹é¢çš„ã€Œå‰µå»ºæ¸¬è©¦ç”¨æˆ¶ã€ä¾†è¨»å†Šæ–°å¸³è™Ÿ';
                } else if (error.code === 'auth/wrong-password') {
                    errorMessage = 'å¯†ç¢¼éŒ¯èª¤';
                    suggestion = 'å»ºè­°ï¼šå˜—è©¦é‡è¨­å¯†ç¢¼æˆ–ç¢ºèªå¯†ç¢¼æ˜¯å¦æ­£ç¢º';
                } else if (error.code === 'auth/invalid-credential') {
                    errorMessage = 'æ†‘è­‰ç„¡æ•ˆ';
                    suggestion = 'å»ºè­°ï¼šæª¢æŸ¥é›»å­éƒµä»¶æ ¼å¼å’Œå¯†ç¢¼ï¼Œæˆ–å…ˆè¨»å†Šæ–°å¸³è™Ÿ';
                }
                
                result.innerHTML = `
                    <p class="error">âŒ ç™»å…¥å¤±æ•—ï¼š${errorMessage}</p>
                    <p><strong>éŒ¯èª¤ä»£ç¢¼:</strong> ${error.code}</p>
                    ${suggestion ? `<p class="warning">${suggestion}</p>` : ''}
                `;
            }
        };

        // é‡è¨­å¯†ç¢¼
        window.resetExistingPassword = async function() {
            const email = document.getElementById('existingEmail').value;
            const result = document.getElementById('existingResult');
            
            if (!email) {
                result.innerHTML = '<p class="error">è«‹è¼¸å…¥é›»å­éƒµä»¶åœ°å€</p>';
                return;
            }

            result.innerHTML = '<p class="info">æ­£åœ¨ç™¼é€é‡è¨­å¯†ç¢¼éƒµä»¶...</p>';

            try {
                await initFirebase();
                const { sendPasswordResetEmail } = await import('https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js');
                
                await sendPasswordResetEmail(auth, email);
                
                result.innerHTML = `
                    <p class="success">âœ… å¯†ç¢¼é‡è¨­éƒµä»¶å·²ç™¼é€ï¼</p>
                    <p>è«‹æª¢æŸ¥æ‚¨çš„é›»å­éƒµä»¶ï¼š<strong>${email}</strong></p>
                    <p class="info">é»æ“Šéƒµä»¶ä¸­çš„é€£çµä¾†é‡è¨­å¯†ç¢¼</p>
                `;
            } catch (error) {
                let errorMessage = error.message;
                if (error.code === 'auth/user-not-found') {
                    errorMessage = 'æ­¤é›»å­éƒµä»¶æœªè¨»å†Šï¼Œè«‹å…ˆå‰µå»ºå¸³è™Ÿ';
                }
                
                result.innerHTML = `
                    <p class="error">âŒ ç™¼é€é‡è¨­éƒµä»¶å¤±æ•—ï¼š${errorMessage}</p>
                    <p><strong>éŒ¯èª¤ä»£ç¢¼:</strong> ${error.code}</p>
                `;
            }
        };
    </script>
</body>
</html> 